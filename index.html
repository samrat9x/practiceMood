<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blob Object Usage Examples</title>
  </head>
  <body>
    <h1>All Types of Blob Object Usage in JavaScript</h1>

    <h2>1. Creating a Simple Blob</h2>
    <button onclick="createSimpleBlob()">Create Simple Blob</button>
    <pre id="simpleBlobOutput"></pre>

    <h2>2. Reading Blob Content using FileReader</h2>
    <button onclick="readBlobContent()">Read Blob Content</button>
    <pre id="blobContentOutput"></pre>

    <h2>3. Creating an Image from Blob</h2>
    <button onclick="createImageFromBlob()">Create Image from Blob</button>
    <br /><br />
    <img id="imageOutput" alt="Generated Image from Blob" />

    <h2>4. Downloading Blob as a File</h2>
    <button onclick="downloadBlob()">Download Blob as File</button>

    <h2>5. Uploading Blob using XMLHttpRequest</h2>
    <button onclick="uploadBlob()">Simulate Blob Upload</button>
    <pre id="uploadOutput"></pre>

    <script>
      // Example 1: Creating a Simple Blob
      function createSimpleBlob() {
        const blob = new Blob(["Hello, this is Blob content!"], {
          type: "text/plain",
        });
        document.getElementById("simpleBlobOutput").textContent =
          JSON.stringify(blob, null, 2);
      }

      // Example 2: Reading Blob Content using FileReader
      function readBlobContent() {
        const blob = new Blob(["Hello, this is Blob content!"], {
          type: "text/plain",
        });

        const reader = new FileReader();
        reader.onload = function (e) {
          document.getElementById("blobContentOutput").textContent =
            e.target.result;
        };
        reader.readAsText(blob);
      }

      // Example 3: Creating an Image from Blob
      function createImageFromBlob() {
        // Simulate a Blob from a base64-encoded image (you could fetch this from a server)
        const base64Image =
          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAADbklEQVR42u3cMYtUZRiA8Y+JtkFb";
        fetch(base64Image)
          .then((res) => res.blob())
          .then((blob) => {
            const imageUrl = URL.createObjectURL(blob);
            document.getElementById("imageOutput").src = imageUrl;
          });
      }

      // Example 4: Downloading Blob as a File
      function downloadBlob() {
        const blob = new Blob(["This is the content of the file."], {
          type: "text/plain",
        });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "sample.txt";
        link.click();
      }

      // Example 5: Uploading Blob using XMLHttpRequest
      function uploadBlob() {
        const blob = new Blob(["This is content for upload!"], {
          type: "text/plain",
        });
        const xhr = new XMLHttpRequest();
        xhr.open("POST", "https://example.com/upload", true);

        xhr.onload = function () {
          if (xhr.status === 200) {
            document.getElementById("uploadOutput").textContent =
              "Blob uploaded successfully!";
          } else {
            document.getElementById("uploadOutput").textContent =
              "Upload failed!";
          }
        };

        xhr.onerror = function () {
          document.getElementById("uploadOutput").textContent =
            "Network error!";
        };

        // Simulating the upload process (Note: This will not actually upload to a server)
        xhr.send(blob);
      }
    </script>
  </body>
</html>
